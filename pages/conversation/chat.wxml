<view class='rong-chat' style='bottom: {{bottom}}px;'>

  <scroll-view class='rong-messages' bindtouchstart='hideKeyboard' scroll-y="true" bindscrolltoupper='getMoreMessages' scroll-into-view='U-{{toView}}' scroll-with-animation='{{true}}'>
    <view class='rong-message' wx:for="{{messageList}}" wx:key='{{message.uId}}' wx:for-item="message" id="U-{{message.uId}}">
      <image class='rong-avatar rong-message-avatar rong-message-avatar-{{message.direction}}' src='{{message.sender.avatar}}'></image>
      <view class='rong-message-content rong-message-content-{{message.direction}}'>
        <TextMessage wx:if = '{{message.name == "TextMessage"}}' message='{{message}}'></TextMessage>
         <ImageMessage wx:if = '{{message.name == "ImageMessage"}}'  message='{{message}}'></ImageMessage>
        <VoiceMessage wx:if = '{{message.name == "VoiceMessage"}}'  message='{{message}}' ></VoiceMessage> 
      </view>
      <view class='rong-clearfix'></view>
    </view>
  </scroll-view>
  
  <view wx:if='{{isRecording}}' class='rong-voice-recording'></view>
  
  <view class='rong-editor'>
    <view wx:if='{{!isShowKeyboard}}' class='rong-icon rong-editor-btn rong-editor-btn-voice' bindtap='showKeyboard'></view>

    <input wx:if='{{!isShowKeyboard}}' class='rong-editor-input' adjust-position='{{false}}' bindinput='onInput' bindfocus='onFocus' value='{{content}}' confirm-type='send' confirm-hold='{{true}}' bindconfirm='sendText'></input>
    <view wx:if='{{isShowKeyboard}}' class='rong-icon rong-editor-btn rong-editor-btn-keyboard' bindtap='showVoice'></view>

    <view wx:if='{{isShowKeyboard}}' class='rong-editor-input rong-editor-record' bindtouchstart='startRecording' bindtouchend='stopRecording'>按住 说话</view>

    <view wx:if='{{ !isShowEmojiSent }}' class='rong-icon rong-editor-btn rong-editor-btn-more' bindtap='showMore'></view>
    <view wx:if='{{isShowEmojiSent}}' class='rong-editor-btn rong-editor-btn-emojisent' bindtap='sendText'>发送</view>

    <view class='rong-icon rong-editor-btn rong-editor-btn-emoji' bindtap='showEmojis'></view>


  </view>
</view>

<view class='rong-editor-emojis' style='display:{{display.emoji}};'>
  <swiper indicator-dots="{{true}}" class='rong-emojis-swiper'>
    <block wx:for="{{emojis}}" wx:key='group' wx:for-item='group'>
      <swiper-item>
        <span class='rong-editor-emoji' wx:for="{{group}}" wx:key='emoji' bindtap='selectEmoji' data-emoji='{{item.emoji}}'>
          {{item.emoji}}
        </span>
      </swiper-item>
    </block>
  </swiper>
</view>

<view class='rong-editor-more' style='display:{{display.more}};'>
  <swiper indicator-dots="{{true}}" class='rong-modules-swiper'>
    <block>
      <swiper-item>
        <view class='rong-editor-module'>
          <view class='rong-editor-module-image' bindtap='sendImage'></view>
        </view>
      </swiper-item>
    </block>
  </swiper>
</view>

<view class='rong-adapter-box' style='height: {{adapterHeight}}px;'></view>